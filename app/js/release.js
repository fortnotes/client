/*! fortnotes-client v2.0.0 (webpack: v1.13.2) */
!function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return e[i].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";var i=n(1),o=n(7),s=n(9);i.route(n(10)),i.nodes={},(JSON.parse(localStorage.getItem("nodes"))||[]).map(function(e){i.nodes[e]=null,s.add(e)}),i.nodeId=localStorage.getItem("nodeId"),i.nodeId||!function(){var e=new Uint8Array(i.config.nodeIdSize),t=[];window.crypto.getRandomValues(e),e.forEach(function(e,n){e=e.toString(16),1===e.length&&(e="0"+e),n&&n%2===0&&t.push(":"),t.push(e)}),localStorage.setItem("nodeId",i.nodeId=t.join(""))}(),i.nodeKey=localStorage.getItem("nodeKey"),i.nodeKey||!function(){var e=new Uint8Array(i.config.nodeKeySize),t=[];window.crypto.getRandomValues(e),e.forEach(function(e){e=e.toString(16),1===e.length&&(e="0"+e),t.push(e)}),localStorage.setItem("nodeKey",i.nodeKey=t.join(""))}(),i.nodeName=localStorage.getItem("nodeName"),i.nodeName||!function(){var e=prompt("Please enter this node name, e.g., phone or tablet.")||"new node";localStorage.setItem("nodeName",i.nodeName=e)}();Date.now();i.wamp=new o("ws://"+(i.query.wampHost||location.hostname)+":8090/"+i.nodeId),i.wamp.onopen=function(){i.wamp.call("auth",{key:i.nodeKey},function(e,t){e||(i.emit("wamp:open"),t||i.emit("wamp:auth:error"))})},i.wamp.onclose=function(){i.emit("wamp:close")},n(13)},function(e,t,n){"use strict";var i=n(2),o=n(6);Object.keys(o).forEach(function(e){window.addEventListener(e,o[e])}),e.exports=i},function(e,t,n){"use strict";function i(e,t){return!(!e||e.active)&&(e.$node.classList.add("active"),e.active=!0,r.activePage=e,e.events.show&&e.emit("show",{page:e,data:t}),!0)}function o(e){return!(!e||!e.active)&&(e.$node.classList.remove("active"),e.active=!1,r.activePage=null,e.events.hide&&e.emit("hide",{page:e}),!0)}var s=n(3),a=n(4).parse,r=new s;r.query=a(document.location.search.substring(1)),r.config=n(5),r.activePage=null,r.route=function(e,t){var n=r.activePage;return!(!e||e.active)&&(o(r.activePage),i(e,t),this.events.route&&this.emit("route",{from:n,to:e}),!0)},e.exports=r},function(e,t,n){"use strict";function i(){this.events={}}i.prototype={addListener:function(e,t){this.events[e]=this.events[e]||[],this.events[e].push(t)},once:function(e,t){var n=this;this.events[e]=this.events[e]||[],this.events[e].push(function i(){t.apply(n,arguments),n.removeListener(e,i)})},addListeners:function(e){var t;for(t in e)e.hasOwnProperty(t)&&this.addListener(t,e[t])},removeListener:function(e,t){this.events[e]&&(this.events[e]=this.events[e].filter(function(e){return e!==t}),0===this.events[e].length&&(this.events[e]=void 0))},emit:function(e){var t,n=this.events[e];if(n)for(t=0;t<n.length;t++)n[t].apply(this,Array.prototype.slice.call(arguments,1))}},i.prototype.constructor=i,e.exports=i},function(e,t){"use strict";e.exports={parse:function(e){var t={};return e.split("&").forEach(function(e){e=e.split("="),2===e.length&&(t[e[0]]=decodeURIComponent(e[1]))}),t},stringify:function(e){var t=[];return Object.keys(e).forEach(function(n){t.push(n+"="+encodeURIComponent(e[n]))}),t.join("&")}}},function(e,t){"use strict";e.exports={nodeIdSize:16,nodeKeySize:32,rtc:{iceServers:[{urls:"stun:stun.services.mozilla.com"},{urls:"stun:stun.l.google.com:19302"}]}}},function(e,t,n){"use strict";var i=n(2);e.exports={DOMContentLoaded:function(e){i.events.dom&&i.emit("dom",e)},load:function(e){i.events[e.type]&&i.emit(e.type,e)},unload:function(e){i.events[e.type]&&i.emit(e.type,e)},error:function(e){},keydown:function(e){var t,n=i.activePage,o={code:e.keyCode,stop:!1};e.ctrlKey&&(o.code+="c"),e.altKey&&(o.code+="a"),e.shiftKey&&(o.code+="s"),t=n.activeComponent,t&&t!==n&&(t.events[e.type]&&t.emit(e.type,o,e),!o.stop&&t.propagate&&t.parent&&t.parent.events[e.type]&&t.parent.emit(e.type,o,e)),o.stop||(n.events[e.type]&&n.emit(e.type,o,e),e.stop||i.events[e.type]&&i.emit(e.type,o,e))},keypress:function(e){var t=i.activePage;t.activeComponent&&t.activeComponent!==t&&t.activeComponent.events[e.type]&&t.activeComponent.emit(e.type,e)},contextmenu:function(e){e.preventDefault()},mousewheel:function(e){var t=i.activePage;t.activeComponent&&t.activeComponent!==t&&t.activeComponent.events[e.type]&&t.activeComponent.emit(e.type,e),e.stop||t.events[e.type]&&t.emit(e.type,e)}}},function(e,t,n){"use strict";function i(e,t){function n(){var t=new WebSocket(e);return t.onopen=function(){"function"==typeof i.onopen&&i.onopen(),i.open=!0},t.onclose=function(){"function"==typeof i.onclose&&i.open&&i.onclose(),i.open=!1,i.timeout&&setTimeout(function(){i.socket=n(),i.socket.onmessage=function(e){i.router(e.data)}},i.timeout)},t}var i=this;t=t||{},this.open=!1,t.timeout&&(this.timeout=t.timeout),this.onopen=null,this.onclose=null,o.call(this,n())}var o=n(8);i.prototype=Object.create(o.prototype),i.prototype.constructor=i,i.prototype.timeout=5e3,e.exports=i},function(e,t,n){"use strict";function i(e){var t=this;s.call(this),this.socket=e,"on"in e?e.on("message",function(e){t.router(e)}):"onmessage"in e&&(e.onmessage=function(e){t.router(e.data)})}function o(e,t){1===e.readyState&&(t.jsonrpc="2.0",e.send(JSON.stringify(t)))}var s=n(3),a=0,r={};i.prototype=Object.create(s.prototype),i.prototype.constructor=i,i.prototype.router=function(e){var t,n=this;try{t=JSON.parse(e)}catch(i){return void o(this.socket,{error:{code:-32700,message:"Parse error"},id:null})}"id"in t&&!("method"in t)?t.id in r&&(r[t.id](t.error,t.result),delete r[t.id]):!("id"in t)&&"method"in t?this.events[t.method]&&this.emit(t.method,t.params):"id"in t&&"method"in t?this.events[t.method]?this.emit(t.method,t.params,function(e,i){o(n.socket,{error:e,result:i,id:t.id})}):o(this.socket,{error:{code:-32601,message:"Method not found"},id:t.id}):o(this.socket,{error:{code:-32600,message:"Invalid Request"},id:null})},i.prototype.call=function(e,t,n){var i={method:e,params:t};"function"==typeof n&&(i.id=++a,r[a]=n),o(this.socket,i)},e.exports=i},function(e,t,n){"use strict";var i=n(3),o=(n(8),new i);window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection,window.RTCSessionDescription||window.mozRTCSessionDescription,window.RTCIceCandidate||window.mozRTCIceCandidate;o.init=function(e){this.wamp=e.wamp},o.add=function(e){},e.exports=o},function(e,t,n){"use strict";var i=n(11),o=new i({$node:window.pageInit});e.exports=o},function(e,t,n){"use strict";function i(e){e=e||{},this.active=!1,this.activeComponent=null,o.call(this,e),this.active=this.$node.classList.contains("active"),null===this.$node.parentNode&&document.body.appendChild(this.$node),this.page=this}var o=n(12);i.prototype=Object.create(o.prototype),i.prototype.constructor=i,i.prototype.name="spa-component-page",e.exports=i},function(e,t,n){"use strict";function i(e){var t,n=this;if(e=e||{},this.visible=!0,this.focusable=!0,this.$node=null,this.$body=null,this.parent=null,this.children=[],this.propagate=!!e.propagate,s.call(this),this.$node=e.$node||document.createElement("div"),this.$body=e.$body||this.$node,this.$node.className=this.name+" "+(e.className||""),this.id=e.id||this.$node.id||"cid"+a++,e.parent&&e.parent.add(this),e.visible===!1&&this.hide(),e.focusable===!1&&(this.focusable=!1),this.defaultEvents){e.events=e.events||{};for(t in this.defaultEvents)e.events[t]=e.events[t]||this.defaultEvents[t]}e.events&&Object.keys(e.events).forEach(function(t){n.addListener(t,e.events[t])}),e.children&&this.add.apply(this,e.children),this.$node.addEventListener("click",function(e){n.focus(),n.events.click&&n.emit("click",e),e.stopPropagation()})}var o=n(2),s=n(3),a=0;i.prototype=Object.create(s.prototype),i.prototype.constructor=i,i.prototype.defaultEvents=null,i.prototype.add=function(e){var t;for(t=0;t<arguments.length;t++)e=arguments[t],this.children.push(e),e.parent=this,e.$node&&null===e.$node.parentNode&&this.$body.appendChild(e.$node),this.events.add&&this.emit("add",{item:e})},i.prototype.remove=function(){this.parent&&(o.activePage.activeComponent===this&&(this.blur(),this.parent.focus()),this.parent.children.splice(this.parent.children.indexOf(this),1)),this.children.forEach(function(e){e.remove()}),this.events={},this.$node.parentNode.removeChild(this.$node),this.events.remove&&this.emit("remove")},i.prototype.focus=function(e){var t=o.activePage,n=t.activeComponent;return!(!this.focusable||this===n)&&(n&&n.blur(),t.activeComponent=n=this,n.$node.classList.add("focus"),n.events.focus&&n.emit("focus",e),!0)},i.prototype.blur=function(){var e=o.activePage,t=e.activeComponent;return this.$node.classList.remove("focus"),this===t&&(e.activeComponent=null,this.events.blur&&this.emit("blur"),!0)},i.prototype.show=function(e){return!!this.visible||(this.$node.classList.remove("hidden"),this.visible=!0,this.events.show&&this.emit("show",e),!0)},i.prototype.hide=function(){return!this.visible||(this.$node.classList.add("hidden"),this.visible=!1,this.events.hide&&this.emit("hide"),!0)},e.exports=i},function(e,t,n){"use strict";function i(e){var t=new r({id:e,rtp:o.config.rtp});t.pc.onicecandidate=function(t){t.candidate&&o.wamp.call("ice",{id:e,candidate:t.candidate})},t.createOffer(function(n){o.wamp.call("connect",{id:e,sdp:n},function(e,n){e||t.acceptAnswer(n)})}),t.addListener("open",function(){setTimeout(function(){t.wamp.call("onNodeName",{name:o.nodeName})},1e3)}),o.nodes[e]=t}var o=n(1),s=n(14),a=(n(16),n(11)),r=(n(17),n(18)),c=(n(19),new a({$node:window.pageMain}));o.wamp.addListener("connect",function(e,t){var n=new r({id:e.id,rtp:o.config.rtp});(e.id in o.nodes||confirm("Do you want to add new node with id "+e.id))&&(n.pc.onicecandidate=function(t){t.candidate&&o.wamp.call("ice",{id:e.id,candidate:t.candidate})},n.createAnswer(e.sdp,function(e){t(null,e)}),n.addListener("open",function(){n.wamp.addListener("onNodeName",function(e){}),n.wamp.socket.onmessage=function(e){}}),o.nodes[e.id]=n,localStorage.setItem("nodes",JSON.stringify(Object.keys(o.nodes))))}),o.wamp.addListener("ice",function(e){o.nodes[e.id]&&o.nodes[e.id].addIceCandidate(e.candidate)}),c.add(new s({$node:window.pmBtnDisconnect,value:"Disconnect",events:{click:function(){window.serverAddressValue.parentNode.classList.remove("online"),o.wamp.socket.onclose=null,o.wamp.socket.close()}}})),c.add(new s({$node:window.pmBtnRemoveNodes,value:"Remove nodes",events:{click:function(){localStorage.setItem("nodes","[]")}}})),c.add(new s({$node:window.pmBtnAddNode,value:"Add node",events:{click:function(){var e=prompt("Please enter the node id to link with.");e&&(i(e),localStorage.setItem("nodes",JSON.stringify(Object.keys(o.nodes))))}}})),o.addListener("wamp:open",function(){window.serverAddressValue.parentNode.classList.add("online"),Object.keys(o.nodes).forEach(function(e){i(e)}),document.body.classList.remove("loading"),o.route(c)}),o.addListener("wamp:close",function(){window.serverAddressValue.parentNode.classList.remove("online")}),o.addListener("wamp:auth:error",function(){alert("Fatal authentication error.")}),window.serverAddressValue.innerText="wss.fortnotes.com",window.serverAddressValue.href="https://wss.fortnotes.com/",window.nodeIdValue.innerText=o.nodeId,window.nodeNameValue.innerText=o.nodeName,e.exports=c},function(e,t,n){"use strict";function i(e){e=e||{},o.call(this,e),e.icon&&(this.$icon=this.$body.appendChild(document.createElement("div")),this.$icon.className="icon "+e.icon),this.$text=this.$body.appendChild(document.createElement("div")),this.$text.classList.add("text"),e.value&&(this.$text.innerText=e.value)}var o=n(12),s=n(15);i.prototype=Object.create(o.prototype),i.prototype.constructor=i,i.prototype.name="spa-component-button",i.prototype.clickDuration=200,i.prototype.defaultEvents={click:function(){var e=this;this.$node.classList.add("click"),setTimeout(function(){e.$node.classList.remove("click")},this.clickDuration)},keydown:function(e){e.code===s.enter&&this.events.click&&this.emit("click",{event:e})}},e.exports=i},function(e,t){"use strict";e.exports={backspace:8,tab:9,enter:13,escape:27,pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,"delete":46}},function(e,t,n){"use strict";function i(e){e=e||{},this.$focusItem=null,this.viewIndex=null,this.data=[],this.type=this.TYPE_VERTICAL,this.size=5,this.cycle=!1,this.scroll=null,e.type&&(this.type=e.type),this.provider=null,this.type===this.TYPE_HORIZONTAL&&(e.className+=" horizontal"),s.call(this,e),this.init(e)}function o(e){var t,n;for(t=0;t<e.length;t++)n=e[t],"object"!=typeof n&&(n=e[t]={value:e[t]});return e}var s=n(12),a=n(15);i.prototype=Object.create(s.prototype),i.prototype.constructor=i,i.prototype.name="spa-component-list",i.prototype.TYPE_VERTICAL=1,i.prototype.TYPE_HORIZONTAL=2,i.prototype.renderItemDefault=function(e,t){e.innerText=t.value},i.prototype.renderItem=i.prototype.renderItemDefault,i.prototype.defaultEvents={mousewheel:function(e){this.type===this.TYPE_VERTICAL&&e.wheelDeltaY&&this.move(e.wheelDeltaY>0?a.up:a.down),this.type===this.TYPE_HORIZONTAL&&e.wheelDeltaX&&this.move(e.wheelDeltaX>0?a.left:a.right)},keydown:function(e){switch(e.code){case a.up:case a.down:case a.right:case a.left:case a.pageUp:case a.pageDown:case a.home:case a.end:this.move(e.code);break;case a.enter:this.events["click:item"]&&this.$focusItem&&this.emit("click:item",{$item:this.$focusItem,event:e})}}},i.prototype.init=function(e){var t,n,i=this,o=this.$body.children.length,s=function(e){this.data&&(i.focusItem(this),i.events["click:item"]&&i.emit("click:item",{$item:this,event:e}))};if(void 0!==e.cycle&&(this.cycle=e.cycle),e.scroll&&(this.scroll=e.scroll),e.provider&&(this.provider=e.provider),e.render&&(this.renderItem=e.render),e.size&&(this.size=e.size),this.size!==o)for(o>0&&(this.$body.innerText=null),n=0;n<this.size;n++)t=document.createElement("div"),t.index=n,t.className="item",t.addEventListener("click",s),this.$body.appendChild(t);this.provider?this.provider.get(null,function(t,n){t?i.events["data:error"]&&i.emit("data:error",t):(n&&(e.data=n,i.setData(e),i.scroll&&i.scroll.init({realSize:i.provider.maxCount,viewSize:i.provider.size,value:i.provider.head+i.provider.pos})),i.events["data:get"]&&i.emit("data:get"))}):e.data&&this.setData(e)},i.prototype.setData=function(e){e.data&&(this.data=o(e.data)),this.viewIndex=null,this.$focusItem&&this.blurItem(this.$focusItem),this.scroll&&(this.provider?this.scroll.realSize!==this.provider.maxCount&&this.scroll.init({realSize:this.provider.maxCount,viewSize:this.provider.size,value:this.provider.head+this.provider.pos}):this.scroll.init({realSize:this.data.length,viewSize:this.size,value:e.viewIndex||0})),void 0!==e.focusIndex&&this.data.length?this.focusIndex(e.focusIndex):this.renderView(e.viewIndex||0)},i.prototype.renderView=function(e){var t,n,i,o,s;if(this.viewIndex!==e){for(o=this.viewIndex,this.viewIndex=s=e,n=0;n<this.size;n++)t=this.$body.children[n],i=this.data[e],i?(t.data=i,t.index=e,this.renderItem(t,i),i.mark?t.classList.add("mark"):t.classList.remove("mark")):(t.data=t.index=void 0,t.innerHTML="&nbsp;",t.ready=!1),e++;return this.events["move:view"]&&this.emit("move:view",{prevIndex:o,currIndex:s}),this.events["select:item"]&&this.emit("select:item",{$item:t}),this.scroll&&this.scroll.scrollTo(this.provider?this.provider.head+this.provider.pos:this.viewIndex),!0}return!1},i.prototype.move=function(e){var t=this,n=!1;if(this.data.length)switch(e){case a.left:if(this.type!==this.TYPE_HORIZONTAL)break;n=!0;case a.up:(n||this.type===this.TYPE_VERTICAL)&&(this.$focusItem&&this.$focusItem.index>0?this.$focusItem===this.$body.firstChild?this.renderView(this.viewIndex-1):this.focusItem(this.$focusItem.previousSibling):this.provider?this.provider.get(e,function(e,n,i){e?t.events["data:error"]&&t.emit("data:error",e):n&&t.setData({data:n,focusIndex:i||0===i?i:t.$focusItem.index})}):(this.cycle&&this.move(a.end),this.events.overflow&&this.emit("overflow",{direction:e,cycle:this.cycle})));break;case a.right:if(this.type!==this.TYPE_HORIZONTAL)break;n=!0;case a.down:(n||this.type===this.TYPE_VERTICAL)&&(this.$focusItem&&this.$focusItem.index<this.data.length-1?this.$focusItem===this.$body.lastChild?this.renderView(this.viewIndex+1):this.focusItem(this.$focusItem.nextSibling):this.provider?this.provider.get(e,function(e,n,i){e?t.events["data:error"]&&t.emit("data:error",e):n&&t.setData({data:n,focusIndex:i||0===i?i:t.$focusItem.index})}):(this.cycle&&this.move(a.home),this.events.overflow&&this.emit("overflow",{direction:e,cycle:this.cycle})));break;case a.pageUp:if(this.provider)return void this.provider.get(e,function(e,n,i){e?t.events["data:error"]&&t.emit("data:error",e):n&&t.setData({data:n,focusIndex:i?i:0})});this.viewIndex<this.size?this.renderView(0):this.renderView(this.viewIndex-this.size+1),this.focusItem(this.$body.firstChild);break;case a.pageDown:if(this.provider){this.provider.get(e,function(e,n,i){e?t.events["data:error"]&&t.emit("data:error",e):n&&t.setData({data:n,focusIndex:i||0===i?i:n.length<t.size?n.length-1:t.size-1})});break}this.data.length>this.size?(this.viewIndex>this.data.length-2*this.size?this.renderView(this.data.length-this.size):this.renderView(this.viewIndex+this.size-1),this.focusItem(this.$body.lastChild)):this.focusItem(this.$body.children[this.data.length-1]);break;case a.home:if(this.provider){this.provider.get(e,function(e,n,i){e?t.events["data:error"]&&t.emit("data:error",e):n&&t.setData({data:n,focusIndex:i?i:0})});break}this.renderView(0),this.focusItem(this.$body.firstChild);break;case a.end:if(this.provider){this.provider.get(e,function(e,n,i){e?t.events["data:error"]&&t.emit("data:error",e):n&&t.setData({data:n,focusIndex:i||0===i?i:n.length<t.size?n.length-1:t.size-1})});break}this.data.length>this.size?(this.renderView(this.data.length-this.size),this.focusItem(this.$body.lastChild)):this.focusItem(this.$body.children[this.data.length-1])}},i.prototype.focusItem=function(e){var t=this.$focusItem;return!(!e||t===e)&&(null!==t&&(t.classList.remove("focus"),this.events["blur:item"]&&this.emit("blur:item",{$item:t})),this.$focusItem=e,this.$focusItem.data=this.data[this.$focusItem.index],e.classList.add("focus"),this.events["focus:item"]&&this.emit("focus:item",{$prev:t,$curr:e}),this.events["select:item"]&&this.emit("select:item",{$item:e}),!0)},i.prototype.blurItem=function(e){return!!e&&(e===this.$focusItem&&(this.$focusItem=null),e.classList.remove("focus"),this.events["blur:item"]&&this.emit("blur:item",{$item:e}),!0)},i.prototype.focusIndex=function(e){var t=this.viewIndex||0;e>=t+this.size?(e=e<this.data.length-1?e:this.data.length-1,this.renderView(e-this.size+1),this.focusItem(this.$body.lastChild)):e<t?(e=e>0?e:0,this.renderView(e),this.focusItem(this.$body.firstChild)):(null===this.viewIndex&&this.renderView(0),this.focusItem(this.$body.children[e-t]))},i.prototype.markItem=function(e,t){t?e.classList.add("mark"):e.classList.remove("mark"),e.data.mark=t},e.exports=i},function(e,t){"use strict";function n(e){}function i(e){e.onmessage=function(e){JSON.parse(e.data)},e.onopen=function(){e.push=e.send,e.send=function(t){e.push(JSON.stringify(t))}},e.onerror=function(e){},e.onclose=function(e){}}var o=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection,s=window.RTCSessionDescription||window.mozRTCSessionDescription,a=window.RTCIceCandidate||window.mozRTCIceCandidate,r={iceServers:[{urls:"stun:stun.services.mozilla.com"},{urls:"stun:stun.l.google.com:19302"}]},c={optional:[{DtlsSrtpKeyAgreement:!0}]},d={createOffer:function(e){var t=new o(r,c);return this.dc=t.createDataChannel("channel",{reliable:!0}),i(this.dc),t.onsignalingstatechange=function(e){},t.oniceconnectionstatechange=function(e){},t.createOffer(function(n){t.setLocalDescription(n),e(n)},n),this.peer=t,this},setRemoteDescription:function(e){this.peer.setRemoteDescription(new s(e),function(){},n)},addIceCandidate:function(e){this.peer.addIceCandidate(new a({sdpMLineIndex:e.sdpMLineIndex,candidate:e.candidate}),function(){},n)}},h={createAnswer:function(e,t){var a=new o(r,c),d=this;return a.ondatachannel=function(e){d.dc=e.channel,i(d.dc)},a.onsignalingstatechange=function(e){},a.oniceconnectionstatechange=function(e){},a.setRemoteDescription(new s(e),function(){},n),a.createAnswer(function(e){a.setLocalDescription(e),t(e)},n),this.peer=a,this},addIceCandidate:function(e){this.peer.addIceCandidate(new a({sdpMLineIndex:e.sdpMLineIndex,candidate:e.candidate}),function(){},n)}};e.exports={Offerer:d,Answerer:h,setChannelEvents:i}},function(e,t,n){"use strict";function i(e){}function o(e){e=e||{},s.call(this),this.id=e.id,this.pc=new r(e.rtp)}var s=n(3),a=n(8),r=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection,c=window.RTCSessionDescription||window.mozRTCSessionDescription,d=window.RTCIceCandidate||window.mozRTCIceCandidate;o.prototype=Object.create(s.prototype),o.prototype.constructor=o,o.prototype.createOffer=function(e){var t=this;this.pc.onsignalingstatechange=function(){},this.pc.oniceconnectionstatechange=function(){},this.pc.onnegotiationneeded=function(){t.pc.createOffer().then(function(e){return t.pc.setLocalDescription(e)}).then(function(){e(t.pc.localDescription)})["catch"](i)},this.dc=this.pc.createDataChannel("main"),this.wamp=t.setDataChannel(this.dc)},o.prototype.createAnswer=function(e,t){var n=this;this.pc.ondatachannel=function(e){n.dc=e.channel,n.wamp=n.setDataChannel(n.dc)},this.pc.onsignalingstatechange=function(){},this.pc.oniceconnectionstatechange=function(){},this.pc.setRemoteDescription(new c(e),function(){},i),this.pc.createAnswer(function(e){n.pc.setLocalDescription(e),t(e)},i)},o.prototype.acceptAnswer=function(e){this.pc.setRemoteDescription(new c(e),function(){},i)},o.prototype.addIceCandidate=function(e){this.pc.addIceCandidate(new d({sdpMLineIndex:e.sdpMLineIndex,candidate:e.candidate}),function(){},i)},o.prototype.setDataChannel=function(e){var t=this;return e.onopen=function(){t.emit("open")},e.onerror=function(e){},e.onclose=function(e){},new a(e)},e.exports=o},function(e,t,n){"use strict";function i(e){e=e||{},o.call(this,e),this.filterText="",this.init(e),this.addListener("click",function(e){})}var o=n(12);i.prototype=Object.create(o.prototype),i.prototype.constructor=i,i.prototype.name="app-component-node-list",i.prototype.defaultEvents={},i.prototype.init=function(e){var t=this;this.data=e.data||{},Object.keys(this.data).forEach(function(e){var n=document.createElement("div"),i=t.data[e];n.innerText=n.taskId=e,n.className="item"+(i.running?" running":""),i.$node=n,t.$node.appendChild(n)})},i.prototype.matchFilter=function(e){return!(this.filterText&&e.innerText.indexOf(this.filterText)===-1)},i.prototype.applyFilter=function(){var e,t,n=this.$body.children;for(e=n.length;e--;)t=n[e],t.style.display=this.matchFilter(t)?"block":"none"},i.prototype.add=function(e){var t=this,n=document.createElement("div"),i=document.createElement("div");n.className="item",e.tags=e.tags||[],e.tags.push(e.type),e.tags.forEach(function(e){var n=document.createElement("div");n.className="tag",n.innerText=e,n.addEventListener("click",function(n){n.ctrlKey?(t.excludeTags.push(e),window.pageMainTagsExclude.value=window.pageMainTagsExclude.value+(window.pageMainTagsExclude.value?" ":"")+e):(t.includeTags.push(e),window.pageMainTagsInclude.value=window.pageMainTagsInclude.value+(window.pageMainTagsInclude.value?" ":"")+e),t.applyFilter()})}),n.classList.add(e.type),n.tags=e.tags,i.className="info",i.innerText=e.data,n.addEventListener("click",function(){app.wamp.call("getLinkData",{targetId:128,linkId:e.data.link},function(e,t){})}),n.appendChild(i),this.matchFilter(n)||(n.style.display="none"),this.$body.appendChild(n)},e.exports=i}]);
//# sourceMappingURL=release.map